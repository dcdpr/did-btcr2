<!DOCTYPE HTML>
<html lang="en" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Privacy Considerations - did:btcr2 DID Method Specification</title>


        <!-- Custom HTML head -->
        <meta name="darkreader-lock"/>

        <meta name="description" content="did:btcr2 is a censorship-resistant Decentralized Identifier (DID) method using the Bitcoin blockchain as a Verifiable Data Registry to announce changes to the DID document.">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="highlight-css" href="../highlight.css">
        <link rel="stylesheet" id="tomorrow-night-css" href="../tomorrow-night.css">
        <link rel="stylesheet" id="ayu-highlight-css" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="../src/assets/tabs.css">
        <link rel="stylesheet" href="../theme/custom.css">
        <link rel="stylesheet" href="../theme/pagetoc.css">


        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "../";
            const default_light_theme = "light";
            const default_dark_theme = "coal";
            window.path_to_searchindex_js = "../searchindex.js";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="../toc.js"></script>
    </head>
    <body>
    <div id="mdbook-help-container">
        <div id="mdbook-help-popup">
            <h2 class="mdbook-help-title">Keyboard shortcuts</h2>
            <div>
                <p>Press <kbd>←</kbd> or <kbd>→</kbd> to navigate between chapters</p>
                <p>Press <kbd>S</kbd> or <kbd>/</kbd> to search in the book</p>
                <p>Press <kbd>?</kbd> to show this help</p>
                <p>Press <kbd>Esc</kbd> to hide this help</p>
            </div>
        </div>
    </div>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
                sidebar_toggle.checked = false;
            }
            if (sidebar === 'visible') {
                sidebar_toggle.checked = true;
            } else {
                html.classList.remove('sidebar-visible');
            }
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="../toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search (`/`)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="/ s" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">did:btcr2 DID Method Specification</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/dcdpr/did-btcr2" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <div class="search-wrapper">
                            <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                            <div class="spinner-wrapper">
                                <i class="fa fa-spinner fa-spin"></i>
                            </div>
                        </div>
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="privacy-considerations"><a class="header" href="#privacy-considerations">Privacy Considerations</a></h1>
<h2 id="design-considerations"><a class="header" href="#design-considerations">Design Considerations</a></h2>
<h3 id="updates-can-be-private"><a class="header" href="#updates-can-be-private">Updates Can Be Private</a></h3>
<p><strong>did:btcr2</strong> was designed such that updates to Decentralized Identifier (DID) documents are NOT REQUIRED to be public. Bitcoin is used to publicly announce and anchor updates to DID documents, however the updates themselves can be kept private by DID controllers and provided through a <a href="../terminology.html#sidecar">Sidecar</a> mechanism at Resolution Time.</p>
<h3 id="did-documents-can-be-private"><a class="header" href="#did-documents-can-be-private">DID Documents Can Be Private</a></h3>
<p>Since updates to DID documents are NOT REQUIRED to be public, neither are <strong>did:btcr2</strong> DID documents. A <strong>did:btcr2</strong> DID document is an initial document plus a series of updates to that DID document. To keep the DID document fully private, the DID controller can choose to use an externally resolved initial <strong>did:btcr2</strong> and not place the initial DID document on a <a href="../terminology.html#content-addressable-storage">Content Addressable Storage</a> (CAS) system such as the InterPlanetary File System (IPFS). The initial DID document can be provided at Resolution Time through a <a href="../terminology.html#sidecar">Sidecar</a> mechanism along with the collection of <a href="../terminology.html#btcr2-update">BTCR2 Updates</a> that can be verified against the relevant <a href="../terminology.html#beacon-signal">Beacon Signals</a> for the DID being resolved.</p>
<h3 id="offline-did-creation"><a class="header" href="#offline-did-creation">Offline DID Creation</a></h3>
<p><strong>did:btcr2</strong> was designed to support offline creation, that is, the generation of a <strong>did:btcr2</strong> identifier and associated DID document without any network calls to the Bitcoin blockchain. This is possible in both deterministic and externally resolvable DIDs.</p>
<h3 id="aggregation-services-only-need-hashes"><a class="header" href="#aggregation-services-only-need-hashes">Aggregation Services Only Need Hashes</a></h3>
<p><a href="../terminology.html#aggregation-service">Aggregation Services</a> in <strong>did:btcr2</strong> are entities that coordinate <a href="../terminology.html#aggregate-beacon">Aggregate Beacons</a> and the corresponding <a href="../terminology.html#beacon-signal">Beacon Signals</a> that announce and anchor an aggregated set of <a href="../terminology.html#btcr2-update">BTCR2 Updates</a>. However, in <strong>did:btcr2</strong>, aggregators are able to coordinate <a href="../terminology.html#beacon-signal">Beacon Signals</a> without needing to view or validate DID documents or the updates. Instead, they are provided with a hash or <a href="../terminology.html#content-identifier">Content Identifier</a> (CID) of the update for a specific DID which they include in the <a href="../terminology.html#beacon-signal">Beacon Signal</a> according to the type of the <a href="../terminology.html#btcr2-beacon">BTCR2 Beacon</a>.</p>
<h3 id="consensus-splits-break-non-repudiation"><a class="header" href="#consensus-splits-break-non-repudiation">Consensus Splits Break Non-Repudiation</a></h3>
<p>Because <a href="../terminology.html#non-repudiation">Non-Repudiation</a> requires following a complete stream of updates to a DID, any consensus forks in which DID updates to apply can be used to permanently diverge the history for a DID, and thus the key material, creating alternate attestation histories.</p>
<p>As a concrete example, a seemingly small difference between two clients in interpretation of the specification could be used fraudulently to sign a loan in one history and claim that it was never signed in another history.</p>
<p>In order to prevent consensus splits, <strong>did:btcr2</strong> needs a particularly good test suite. It MUST be designed to challenge all the foreseeable edge cases as well as maintained to find new ones.</p>
<h2 id="deployment-considerations"><a class="header" href="#deployment-considerations">Deployment Considerations</a></h2>
<h3 id="cas-systems-lack-privacy"><a class="header" href="#cas-systems-lack-privacy">CAS Systems Lack Privacy</a></h3>
<p>Specifically, in this context, the relevant content are <a href="../terminology.html#btcr2-update">BTCR2 Updates</a> being stored in <a href="../terminology.html#content-addressable-storage">Content Addressable Storage</a> (<a href="../terminology.html#cas">CAS</a>) such as IPFS. These SHOULD be considered public. Anyone MAY retrieve this information (assuming they have the <a href="../terminology.html#cid">CID</a>) and use it to track the DID over time. IPFS node operators would have access to all content stored on IPFS and could choose to index certain data like <a href="../terminology.html#btcr2-update">BTCR2 Updates</a>, including the updates posted by a <a href="../terminology.html#btcr2-beacon">BTCR2 Beacon</a> connected to a specific DID. This MAY advertise information about the DID that the controller wishes to remain private.</p>
<p>Those parties most concerned about privacy SHOULD maintain their <a href="../terminology.html#btcr2-update">BTCR2 Updates</a> in a <a href="../terminology.html#sidecar">Sidecar</a> manner and provide them to necessary parties during resolution. It is RECOMMENDED not to include any sensitive data other than the necessary DID update data.</p>
<h3 id="aggregation-participants-provide-dids-to-aggregation-services"><a class="header" href="#aggregation-participants-provide-dids-to-aggregation-services">Aggregation Participants Provide DIDs to Aggregation Services</a></h3>
<p>Within <a href="../terminology.html#smt-beacon">SMT Beacons</a>, the DID is used as a path to an <a href="../terminology.html#smt">SMT</a> leaf node. The <a href="../terminology.html#aggregation-service">Aggregation Service</a> MUST know these paths to be able to construct the tree and generate the correct proof paths. Within <a href="../terminology.html#cas-beacon">CAS Beacons</a>, the <a href="../terminology.html#aggregation-service">Aggregation Service</a> MUST construct a <a href="../data-structures.html#cas-announcement">CAS Announcement (data structure)</a>. This means that for both types of <a href="../terminology.html#aggregate-beacon">Aggregate Beacons</a>, the <a href="../terminology.html#aggregation-service">Aggregation Service</a> necessarily MUST know all DIDs in the <a href="../terminology.html#aggregation-cohort">Aggregation Cohort</a>.</p>
<h3 id="all-dids-are-visible-to-cas-beacon-aggregation-cohort"><a class="header" href="#all-dids-are-visible-to-cas-beacon-aggregation-cohort">All DIDs are Visible to CAS Beacon Aggregation Cohort</a></h3>
<p><a href="../terminology.html#aggregation-cohort">Aggregation Cohort</a> members participating in a <a href="../terminology.html#cas-beacon">CAS Beacon</a> learn all DIDs that are updated in each <a href="../terminology.html#beacon-signal">Beacon Signal</a> because the contents of a CAS <a href="../terminology.html#beacon-signal">Beacon Signal</a> is a JSON object that maps participant <strong>did:btcr2</strong> identifiers to CID values, where each CID value is that DID’s respective <a href="../terminology.html#btcr2-update">BTCR2 Update</a>. Each DID controller SHOULD independently retrieve and verify the contents of the update bundle to ensure it contains the expected update for their DID before authorizing the <a href="../terminology.html#aggregation-service">Aggregation Service</a> creates the <a href="../data-structures.html#cas-announcement">CAS Announcement (data structure)</a> from the CAS <a href="../terminology.html#beacon-signal">Beacon Signal</a> and broadcasts it.</p>
<h3 id="non-repudiation-reveals-did-document-history"><a class="header" href="#non-repudiation-reveals-did-document-history">Non-Repudiation Reveals DID Document History</a></h3>
<p>One of the side effects of using a DID is that a DID controller’s relying party will see their DID Document. In addition, resolving a DID document requires making available to the resolver all prior DID document updates.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../appendix.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../appendix/security-considerations.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../appendix.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../appendix/security-considerations.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->
        <script src="../src/assets/mermaid.min.js"></script>
        <script src="../src/assets/mermaid-init.js"></script>
        <script src="../src/assets/tabs.js"></script>
        <script src="../theme/pagetoc.js"></script>



    </div>
    </body>
</html>
